% Script to save DTI sequence information as structure

clear;
projectfolder = pwd;

%% Initial details

% Imaging data folder
ImagingDataFolder = fullfile(projectfolder, 'Imaging Data'); 

% Image type
ImageType = 'MAT';

% Sample name
SampleName = '20250407_UQ5';

% Series Description
SeriesDescriptions = {
    '40u_DtiSE_2012_SPOIL10%'
    % 'SE_b0_SPOIL5%',...
    % 'STEAM_DELTA_40',...
    % 'STEAM_DELTA_60',...
    % 'STEAM_DELTA_80',...
    % 'STEAM_DELTA_100',...
    % 'STEAM_DELTA_120',...
};


%% Define structure

for indx = 1:length(SeriesDescriptions)

    SeriesDescription = SeriesDescriptions{indx};

    DTIstruct = struct();
    
    switch SampleName
  

        case {'250224_UQ4', '20250407_UQ5'}
            
            switch SeriesDescription

                case 'SE_b0_SPOIL5%'

                    DiffusionBValue = [0, 0, 0, 0];
                    DiffusionDirection = [0, 0, 0, 0];
                    DiffusionEffBValue = [10.3045556509301 10.3045556509301 10.3045556509301 10.3045556509301];
                
                case 'SE_b0_SPOIL10%'

                    DiffusionBValue = [0, 0, 0, 0];
                    DiffusionDirection = [0, 0, 0, 0];
                    DiffusionEffBValue = [40.874806178439 40.874806178439 40.874806178439 40.874806178439];


                case 'STEAM_DELTA_40'

                    DiffusionBValue = [0, 1000, 1000, 1000, 1000, 1000, 1000];
                    DiffusionDirection = [
                        0 0 0;
                        0.0332096005523013 -0.0151127069086587 0.105249880965036; 
                        -0.0688620598134244 0.0363253402738824 0.0796699146123788; 
                        -0.0539385485048503 -0.0779129830615826 0.0585577405450395;
                        0.109104586679705 0.0105898753043585 0.0198205103010379;
                        0.031904136610893 0.0910231480097285 0.0557290006694651;
                        -0.0560508828073122 0.093818414954694 -0.0215687847134349
                        ];
                    DiffusionEffBValue = [31.4555326508071 1030.00865891474 1022.785232274 1016.82344802067 1007.11154118745 1016.024651232 994.196831972685];

                case 'STEAM_DELTA_60'

                    DiffusionBValue = [0, 1250, 1250, 1250, 1250, 1250, 1250];
                    DiffusionDirection = [
                        0 0 0;
                        0.0302369746965 -0.0137599528086184 0.0958288547475137;
                        -0.0626981452802537 0.0330738213178243 0.0725385777649734;
                        -0.0491104529769502 -0.0709389109830365 0.0533161763375041;
                        0.0993385217479746 0.00964196456120241 0.0180463558271456;
                        0.0290483641890839 0.0828755714430058 0.0507406399077292;
                        -0.0510337100409279 0.0854206311389746 -0.0196381403801375
                        ];
                    DiffusionEffBValue = [49.3776905745272 1293.67897606535 1283.17531330854 1274.50621838444 1262.69815513832 1273.34467933978 1241.60461141643];


                case 'STEAM_DELTA_80'

                    DiffusionBValue = [0, 1500, 1500, 1500, 1500, 1500, 1500];
                    DiffusionDirection = [
                        0 0 0;
                        0.0286480100773723 -0.0130368620102425 0.0907930116708267;
                        -0.0594033336949272 0.0313357793205389 0.0687266476778099;
                        -0.0465296798343666 -0.067211043998892 0.0505143908190185;
                        0.094118244324114 0.00913527562487812 0.0170980129058928;
                        0.0275218615080688 0.0785204283728173 0.0480741998165975;
                        -0.0483518690018756 0.0809317442054845 -0.0186061485700206
                        ];
                    DiffusionEffBValue = [67.2998484982473 1556.88949057735 1543.21734229189 1531.93316894712 1518.27178656765 1530.42124549473 1489.10661789428];


                case 'STEAM_DELTA_100'

                    DiffusionBValue = [0, 1750, 1750, 1750, 1750, 1750, 1750];
                    DiffusionDirection = [
                        0 0 0;
                        0.0276550517474502 -0.0125849960448874 0.0876460678868161;
                        -0.057344376201607 0.0302496611916743 0.0663445381660152;
                        -0.0449169314076745 -0.0648814662787916 0.0487635297641245;
                        0.0908560458521481 0.00881864113601282 0.01650538485619;
                        0.026567936206954 0.0757988601657668 0.0464079173406662;
                        -0.0466759623346047 0.0781265982513007 -0.0179612475747866
                        ];
                    DiffusionEffBValue = [85.2220064219674 1819.8907093611 1803.10094285096 1789.24367391537 1773.83542155106 1787.3869911749 1736.65151519978];


                case 'STEAM_DELTA_120'

                    DiffusionBValue = [0, 2000, 2000, 2000, 2000, 2000, 2000];
                    DiffusionDirection = [
                        0 0 0; 
                        0.0269745703550313 -0.012275329091073 0.0854894449717581;
                        -0.0559333580150775 0.0295053367277069 0.0647120616071976;
                        -0.043811703462104 -0.0632849901297406 0.0475636522539978;
                        0.0886204380812515 0.0086016492730332 0.0160992526467145;
                        0.0259142044262687 0.0739337501533032 0.0452660021311186;
                        -0.0455274515984108 0.0762042118154156 -0.0175192923446577
                        ];
                    DiffusionEffBValue = [103.144164345687 2082.77829673617 2062.89852901701 2046.49095792332 2029.39237426483 2044.29256990009 1984.21969891062];
                % 
                % 
                % case 'STEAM_DELTA_15'
                % 
                %     DiffusionBValue = [0, 1000, 1000, 1000, 1000, 1000, 1000];
                %     DiffusionDirection = [
                %         0 0 0; 
                %         0.0549556261864442 -0.0250086799517372 0.174168704780806;
                %         -0.113953722857196 0.0601115878537278 0.131838684384309;
                %         -0.0892581259447437 -0.128931293993128 0.0969020176755175;
                %         0.180547515811083 0.0175242465705313 0.0327992067598935;
                %         0.052795329550207 0.150626144643266 0.0922209866304156;
                %         -0.0927536408674264 0.155251784300597 -0.0356922712196031
                %         ];
                % 
                %     DiffusionEffBValue = [9.05283524615702 1012.54659566948 1009.51440180003 1007.01181036206 1002.41998289654 1006.67649765716 997.513785410845];
                % 
                % case 'STEAM_DELTA_20'
                % 
                %     DiffusionBValue = [0, 1250, 1250, 1250, 1250, 1250, 1250];
                %     DiffusionDirection = [
                %         0 0 0; 
                %         0.0529265698988054 -0.0240853164524394 0.167738096487009;
                %         -0.109746355315266 0.0578921645888421 0.126970973285968;
                %         -0.0859625623375419 -0.12417092875113 0.0933242284318406;
                %         0.173881390837251 0.0168772212310432 0.0315882036047308;
                %         0.0508460351318635 0.145064768182295 0.0888160291081437;
                %         -0.089329016834121 0.149519621263576 -0.0343744511461397
                %         ];
                %     DiffusionEffBValue = [13.533374727087 1269.19965780595 1264.56105207128 1260.73262437321 1253.70811402484 1260.21966791236 1246.20268502774];
                % 
                % case 'STEAM_DELTA_30'
                % 
                %     DiffusionBValue = [0, 1500, 1500, 1500, 1500, 1500, 1500];
                %     DiffusionDirection = [0 0 0;
                %         0.047088982095184 -0.0214288029123035 0.149237259041328;
                %         -0.0976417736938761 0.051506891661176 0.112966585575121;
                %         -0.0764812374296715 -0.110475374691461 0.0830309413603806;
                %         0.154702972731392 0.0150157316048359 0.0281041517862613;
                %         0.0452379219456928 0.129064707662687 0.0790199782913404;
                %         -0.0794763855342391 0.133028208365306 -0.0305830874293799
                %         ];
                %     DiffusionEffBValue = [22.4944536889471 1529.76232974936 1522.57766985809 1516.6478813608 1505.76773317781 1515.85337156174 1494.14269803435];    
                % 
                % 
                % case 'STEAM_DELTA_40'
                % 
                %     DiffusionBValue = [0, 1750, 1750, 1750, 1750, 1750, 1750];
                %     DiffusionDirection = [
                %         0 0 0;
                %         0.0439321721005913 -0.0199922320586593 0.139232505276318;
                %         -0.0910959425169879 0.0480539083272459 0.105393390519053;
                %         -0.0713539927118143 -0.103069188542068 0.0774646094100092;
                %         0.144331801625495 0.0140090882352585 0.0262200705574701;
                %         0.0422052056333269 0.120412306591983 0.0737225382927783;
                %         -0.074148348336887 0.124110097184192 -0.0285328202168201
                %         ];
                %     DiffusionEffBValue = [31.4555326508071 1789.60487926892 1780.04918401636 1772.16248476409 1757.69173988364 1771.10577593863 1742.23028522713];  
                % 
                % 
                % case 'STEAM_DELTA_50'
                % 
                %     DiffusionBValue = [0, 2000, 2000, 2000, 2000, 2000, 2000];
                %     DiffusionDirection = [
                %         0 0 0;
                %         0.0419413221085741 -0.0190862551143995 0.132922982692659;
                %         -0.0869677979759557 0.0458762758898913 0.100617336419267;
                %         -0.0681204832123194 -0.0983984590202868 0.073954188466733; 
                %         0.13779119704405 0.0133742461168794 0.0250318700937984;
                %         0.0402926156274014 0.114955648563135 0.0703816947206553;
                %         -0.0707882085660471 0.1184858684203 -0.0272398141535001
                %         ];
                %     DiffusionEffBValue = [40.4166116126672 2049.11559200975 2037.26951111784 2027.49246456673 2009.55325555165 2026.1824752991 1990.38587549958];  

                % 
                % case '40u_DtiSTE_SPOIL5%'
                % 
                %     DiffusionBValue  = [0, 0, 1200, 1200, 1200, 1200, 1200, 1200];
                %     DiffusionDirection = [0,0,0,0,0,0,0,0];
                %     DiffusionEffBValue = [497.009991353231 497.009991353231 1450.51908514414 1279.40842320093 1232.78246418072 1492.57145401906 1294.52249145437 1339.17154968835];


                case '40u_DtiSE_2012_SPOIL10%'

                    DiffusionBValue  = [0, 0, 1200, 1200, 1200, 1200, 1200, 1200];                   
                    DiffusionDirection = [
                                         0 0 0; 
                                         0 0 0; 
                                         0.0676716838817596 -0.0307953816821673 0.214469206338141; 
                                        -0.140321216324234 0.0740206718247074 0.162344538533212;...
                                        -0.109911361255691 -0.158764413673833 0.119323955756505;...
                                         0.222323995984571 0.0215791422367511 0.0403885408183281;...
                                         0.0650115211067544 0.185479186608588 0.113559791555188;...
                                        -0.114215695447958 0.191175142534554 -0.0439510249014467];
                    
                    DiffusionEffBValue = [40.874806178439 40.874806178439 1211.95197497596 1200.95114689675 1200.70017607171 1220.63089472967 1200.66654944576 1208.22342214346];

            end


        % case 
        % 
        %     switch SeriesDescription
        % 
        %         case 'SE_b0_SPOIL5%'
        % 
        %             DiffusionBValue = [0, 0, 0, 0];
        %             DiffusionDirection = [0, 0, 0; 0, 0, 0; 0, 0, 0; 0, 0, 0];
        %             DiffusionEffBValue = [10.3045556509301 10.3045556509301 10.3045556509301 10.3045556509301];
        % 
        %         case 'STEAM_DELTA_40'
        % 
        %             DiffusionBValue = [0, 1000, 1000, 1000, 1000, 1000, 1000];
        %             DiffusionDirection = [
        %                 0 0 0;
        %                 0.0332096005523013 -0.0151127069086587 0.105249880965036; 
        %                 -0.0688620598134244 0.0363253402738824 0.0796699146123788; 
        %                 -0.0539385485048503 -0.0779129830615826 0.0585577405450395;
        %                 0.109104586679705 0.0105898753043585 0.0198205103010379;
        %                 0.031904136610893 0.0910231480097285 0.0557290006694651;
        %                 -0.0560508828073122 0.093818414954694 -0.0215687847134349
        %                 ];
        %             DiffusionEffBValue = [31.4555326508071 1030.00865891474 1022.785232274 1016.82344802067 1007.11154118745 1016.024651232 994.196831972685];
        % 
        % 
        %     end



    end


    % Append to structure
    DTIstruct.DiffusionBValue = DiffusionBValue;
    DTIstruct.DiffusionEffBValue = DiffusionEffBValue;
    DTIstruct.DiffusionDirection = DiffusionDirection;

    % Save structure
    
    folder = fullfile(ImagingDataFolder, ImageType, SampleName, SeriesDescription);
    mkdir(folder);
    save(fullfile(folder, 'DTIstruct.mat'), "DTIstruct");
    
end



